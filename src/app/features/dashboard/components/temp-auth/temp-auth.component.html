<div class="temp-auth-page">
  <div class="page-header">
    <h1>
      ๐ ฺฉูุงูุช ุขุฒูุงุด WebAuthn
      <span>ุงูฺฉุงู ุชุณุช ุชูุงู ุณุฑูุณโูุง /api/webauthn/* ุฏุฑ ูุญุท ูุฑูุฑฺฏุฑ</span>
    </h1>
    <p>
      ุงุฒ ุงู ุตูุญู ุจุฑุง ุซุจุชุ ุงุญุฑุงุฒ ููุช ู ูุฏุฑุช ุฏุณุชฺฏุงูโูุง WebAuthn ุงุณุชูุงุฏู ฺฉูุฏ. ูพฺฉุฑุจูุฏ ุฏุฑุฎูุงุณุชโูุง ุฑุง ูุทุงุจู ุจุง ูุญุท
      ุงุฌุฑุง ุฎูุฏ ุชูุธู ูููุฏู ู ุณูพุณ ุนููุงุช ููุฑุฏ ูุธุฑ ุฑุง ุขุบุงุฒ ฺฉูุฏ.
    </p>
  </div>

  <div nz-row [nzGutter]="[16, 16]">
    <div nz-col [nzSpan]="24" [nzLg]="14">
      <nz-card nzTitle="ูพฺฉุฑุจูุฏ ุฏุฑุฎูุงุณุช" class="config-card">
        <div class="config-grid">
          <label class="form-field">
            <span class="label-text">ุขุฏุฑุณ ูพุงู API</span>
            <input nz-input type="url" [(ngModel)]="apiBase" placeholder="http://localhost:8001/api" />
          </label>

          <label class="form-field full-width">
            <span class="label-text">ูุฏุฑ ุงุญุฑุงุฒ ููุช</span>
            <textarea
              nz-input
              rows="3"
              [(ngModel)]="authToken"
              placeholder="Bearer &lt;jwt&gt;"
            ></textarea>
          </label>
        </div>

        <div class="action-row">
          <button nz-button nzType="primary" (click)="startRegistration()" [nzLoading]="loading.register">
            ุดุฑูุน ุซุจุชโูุงู
          </button>
          <button nz-button nzType="default" (click)="startAuthentication()" [nzLoading]="loading.authenticate">
            ุดุฑูุน ุงุญุฑุงุฒ ููุช
          </button>
          <button nz-button nzType="default" nzGhost (click)="listDevices()" [nzLoading]="loading.list">
            ุจูโุฑูุฒุฑุณุงู ุฏุณุชฺฏุงูโูุง
          </button>
          <button nz-button nzType="default" nzGhost (click)="getMe()" [nzLoading]="loading.getMe">
            ุฏุฑุงูุช ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ
          </button>
        </div>
      </nz-card>
    </div>

    <div nz-col [nzSpan]="24" [nzLg]="10" class="side-column">
      <nz-card nzTitle="ุญุฐู ุฏุณุชฺฏุงู" class="delete-card">
        <p class="card-helper">ุดูุงุณู Credential ุฑุง ุงุฒ ูุณุช ุฏุณุชฺฏุงูโูุง ุง ูพุงุณุฎ ุณุฑูุณ ุฏุฑุงูุช ฺฉุฑุฏู ู ุฏุฑ ุงู ูุณูุช ูุงุฑุฏ ฺฉูุฏ.</p>
        <div class="delete-grid">
          <input
            nz-input
            [(ngModel)]="credentialId"
            placeholder="ุดูุงุณู Credential"
            aria-label="ุดูุงุณู Credential"
          />
          <button
            nz-button
            nzType="default"
            nzDanger
            (click)="deleteDevice()"
            [nzLoading]="loading.delete"
          >
            ุญุฐู ุฏุณุชฺฏุงู
          </button>
        </div>
      </nz-card>

      <nz-card nzTitle="ุฏุณุชฺฏุงูโูุง ุซุจุชโุดุฏู" class="devices-card" [nzLoading]="loading.list">
        <ng-container *ngIf="devices.length; else emptyDevices">
          <div class="device-card" *ngFor="let device of devices">
            <div class="device-header">
              <h3>{{ device.device_name || 'ุจุฏูู ูุงู' }}</h3>
              <nz-tag nzColor="blue">{{ device.sign_count }} ุจุงุฑ ุงุณุชูุงุฏู</nz-tag>
            </div>
            <dl>
              <div>
                <dt>Credential ID</dt>
                <dd>{{ device.credential_id }}</dd>
              </div>
              <div>
                <dt>ุชุงุฑุฎ ุงุฌุงุฏ</dt>
                <dd>{{ device.created_at || 'โ' }}</dd>
              </div>
              <div>
                <dt>ุขุฎุฑู ุงุณุชูุงุฏู</dt>
                <dd>{{ device.last_used || 'โ' }}</dd>
              </div>
            </dl>
          </div>
        </ng-container>
        <ng-template #emptyDevices>
          <p class="empty-state">ุชุง ฺฉููู ุฏุณุชฺฏุงู ุซุจุช ูุดุฏู ุงุณุช.</p>
        </ng-template>
      </nz-card>
    </div>
  </div>

  <nz-card nzTitle="ฺฏุฒุงุฑุดโูุง" class="log-card">
    <div class="log-toolbar">
      <button nz-button nzType="default" nzGhost (click)="clearLog()">ูพุงฺฉโุณุงุฒ ฺฏุฒุงุฑุดโูุง</button>
    </div>
    <div class="log-container" #logContainer>
      <ng-container *ngIf="logs.length; else emptyLogs">
        <div class="log-entry" *ngFor="let entry of logs" [ngClass]="entry.level">
          <div class="log-entry__header">
            <span class="timestamp">{{ entry.timestamp }}</span>
            <nz-tag [nzColor]="logColor(entry.level)">{{ entry.level | uppercase }}</nz-tag>
          </div>
          <p class="message">{{ entry.message }}</p>
          <pre class="detail" *ngIf="entry.detail">{{ entry.detail }}</pre>
        </div>
      </ng-container>
      <ng-template #emptyLogs>
        <p class="empty-state">ูููุฒ ฺฏุฒุงุฑุด ุซุจุช ูุดุฏู ุงุณุช.</p>
      </ng-template>
    </div>
  </nz-card>
</div>
